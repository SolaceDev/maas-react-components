import { Meta, Description, Title, Subtitle, ArgTypes } from "@storybook/blocks";
import * as SolaceResponsiveItemListStories from "./SolaceResponsiveItemList.stories.tsx";
import { CustomStories } from "../../../../.storybook/CustomStories.tsx";

<Meta of={SolaceResponsiveItemListStories} />

<Title>Responsive Item List</Title>

<Description of={SolaceResponsiveItemListStories} />

<Subtitle>Code Component Name</Subtitle>
`SolaceResponsiveItemList`

<Subtitle>Component Description</Subtitle>

The Solace Responsive Item List component provides an intelligent layout system that automatically manages collections of items with overflow handling, showing a configurable number of visible items and providing a "show more" mechanism with tooltip display for hidden items when they exceed the available container space. This component is designed to handle dynamic content that may not fit within constrained spaces, providing users with a clean interface while ensuring all content remains accessible and supporting both single-line and multi-line layouts with customizable spacing and overflow behavior.

<Subtitle>Import Statement</Subtitle>

```tsx
import { SolaceResponsiveItemList } from "@SolaceDev/maas-react-components";
```

<Subtitle>Links</Subtitle>

- **GitHub Source Code**: [SolaceResponsiveItemList.tsx](https://github.com/SolaceDev/maas-react-components/blob/main/src/components/SolaceResponsiveItemList.tsx)
- **GitHub Theme Styles**: <a href="https://github.com/SolaceDev/maas-react-components/blob/main/src/resources/theme.ts" target="_blank">theme.ts</a>

<Subtitle>Props</Subtitle>

<ArgTypes of={SolaceResponsiveItemListStories} />

<Subtitle>CSS Classes / Styles</Subtitle>

**Main Component Classes:**

- `.ItemsContainer` - Main container with responsive overflow handling
- Hidden items managed through visibility calculations
- Tooltip integration for overflow item display
- Responsive layout with configurable direction and spacing

**Layout Specifications:**

**Container Styling:**

```tsx
const ItemsContainer = styled("div")<{
	multiline: boolean;
	maxHeight?: string;
	columnGap: string;
	rowGap: string;
	show: boolean;
}>(({ multiline, maxHeight, columnGap, rowGap, show }) => ({
	display: "flex",
	flexWrap: multiline ? "wrap" : "nowrap",
	columnGap: columnGap,
	rowGap: rowGap,
	alignItems: multiline ? "flex-start" : "center"
	// Additional responsive styling
}));
```

**Responsive Behavior:**

- **Single-line mode** (`multiline: false`):

  - Items arranged horizontally
  - Overflow items hidden with tooltip access
  - `alignItems: "center"` for vertical alignment

- **Multi-line mode** (`multiline: true`):
  - Items can wrap to multiple rows
  - Configurable `maxHeight` for vertical constraints
  - `alignItems: "flex-start"` for natural wrapping

**Spacing Configuration:**

- `columnGap`: Horizontal spacing between items (string value, e.g., "8px", "1rem")
- `rowGap`: Vertical spacing between rows in multi-line mode
- Supports theme-based spacing values

**Overflow Handling:**

- Automatic item visibility calculation based on container width
- Dynamic "show more" button when items are hidden
- SolaceTooltip integration for displaying hidden items
- Configurable tooltip variant and positioning

**Visibility Control:**

- `show` prop controls overall component visibility
- Dynamic item counting based on available space
- Resize observation for responsive behavior
- State management for expanded/collapsed views

**Item Management:**

- Individual item rendering with unique keys
- Support for any React node as items
- Difference calculation between all items and visible items
- Tooltip content generation from hidden items

**Theme Customization:**

**Color Theming:**
The component uses the theme.palette color system for all color-related styling. Key color theme paths:

<div style={{ display: "flex", alignItems: "center", margin: "8px 0" }}>
	<div
		style={{
			width: "16px",
			height: "16px",
			backgroundColor: "#015B82",
			border: "1px solid rgba(0,0,0,0.2)",
			borderRadius: "3px",
			marginRight: "8px"
		}}
	></div>
	<span>theme.palette.primary.wMain - "Show more" button color</span>
</div>
<div style={{ display: "flex", alignItems: "center", margin: "8px 0" }}>
	<div
		style={{
			width: "16px",
			height: "16px",
			backgroundColor: "#FFFFFF",
			border: "1px solid rgba(0,0,0,0.2)",
			borderRadius: "3px",
			marginRight: "8px"
		}}
	></div>
	<span>theme.palette.background.w10 - Container background color</span>
</div>
<div style={{ display: "flex", alignItems: "center", margin: "8px 0" }}>
	<div
		style={{
			width: "16px",
			height: "16px",
			backgroundColor: "#273749",
			border: "1px solid rgba(0,0,0,0.2)",
			borderRadius: "3px",
			marginRight: "8px"
		}}
	></div>
	<span>theme.palette.primary.text.wMain - Item text color</span>
</div>

To customize colors, override the palette values in your theme configuration by extending the base theme and modifying the specific color group and variant you want to change.

**Non-Color Theming:**
Structural and layout customization through component overrides and mixins:

- theme.components.SolaceResponsiveItemList.styleOverrides.root - Customize the root container
- theme.components.SolaceResponsiveItemList.styleOverrides.item - Customize individual item styling
- theme.components.SolaceResponsiveItemList.styleOverrides.showMoreButton - Customize the "show more" button
- theme.components.SolaceTooltip - Customize the tooltip for hidden items

To customize layout and structure, override the component styleOverrides in your theme configuration.

**Layout Specifications:**

- Container display: flex
- Flex-wrap: configurable (nowrap for single-line, wrap for multi-line)
- Column gap: customizable (default: theme.spacing(1))
- Row gap: customizable (default: theme.spacing(1))
- Align-items: center (single-line) or flex-start (multi-line)
- Max-height: configurable for multi-line mode
- Show more button: uses SolaceButton component with variant="text"
- Tooltip: uses SolaceTooltip component for hidden items display

**Responsive Behavior:**

- Automatically adjusts visible items based on container width
- Recalculates on window resize and content changes
- Supports both horizontal and vertical overflow handling

**Accessibility:**

- Keyboard navigation support for interactive elements
- ARIA labels for overflow controls
- Screen reader friendly tooltip integration

**Performance Considerations:**

- Uses `useRef` for DOM measurements
- `useMemo` for expensive calculations
- `useCallback` for event handlers
- `useState` for visibility state management
- Efficient re-rendering with proper dependencies

**Accessibility Features:**

- Keyboard navigation support through contained interactive elements
- Screen reader friendly tooltip integration
- Proper ARIA labels for overflow controls
- Focus management for expanded/collapsed states

<Subtitle>Stories</Subtitle>

<CustomStories />
