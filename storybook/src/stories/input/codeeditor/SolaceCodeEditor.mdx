import { Meta, Description, Title, Subtitle, ArgTypes } from "@storybook/blocks";
import * as SolaceCodeEditorStories from "./SolaceCodeEditor.stories.tsx";
import { CustomStories } from "../../../../.storybook/CustomStories.tsx";

<Meta of={SolaceCodeEditorStories} />

<Title>Code Editor</Title>

<Description of={SolaceCodeEditorStories} />

<Subtitle>Code Component Name</Subtitle>
`SolaceCodeEditor`

<Subtitle>Component Description</Subtitle>

The Solace Code Editor component provides a powerful syntax-highlighted code editing interface built on CodeMirror, useful for applications where users need to edit, view, or validate structured data like JSON, XML, or Protocol Buffers and allowing users to work with code content in an intuitive and feature-rich editor environment. The component implements a comprehensive code editing pattern with the purpose of making code manipulation accessible and efficient, helping users write, edit, and validate code through syntax highlighting, error detection, and advanced editing features while maintaining consistency with form workflows and providing accessible code editing capabilities.

<Subtitle>Import Statement</Subtitle>

```tsx
import { SolaceCodeEditor } from "@SolaceDev/maas-react-components";
```

<Subtitle>Links</Subtitle>

- **GitHub Source Code**: [SolaceCodeEditor.tsx](https://github.com/SolaceDev/maas-react-components/blob/main/src/components/form/SolaceCodeEditor.tsx)
- **GitHub Theme Styles**: <a href="https://github.com/SolaceDev/maas-react-components/blob/main/src/resources/theme.ts#:~:text=formComponent_CodeEditor" target="_blank">theme.ts (formComponent_CodeEditor styles)</a>

<Subtitle>Props</Subtitle>

<ArgTypes of={SolaceCodeEditorStories} />

<Subtitle>CSS Classes / Styles</Subtitle>

**Main Component Classes:**

- `.react-codemirror2` - Root CodeMirror container wrapper for the editor instance
- `.CodeMirror` - Main CodeMirror editor container with syntax highlighting and line numbers
- `.CodeMirror-gutters` - Left gutter area containing line numbers and fold indicators
- `.CodeMirror-linenumbers` - Line number display area within the gutter

**State Classes:**

- `.codeEditor-expanded--backdrop` - Applied to backdrop overlay when editor is in expanded/fullscreen mode
- `.codeEditor-expanded--main` - Applied to main editor container when in expanded mode
- `.codeEditor-expanded--icon` - Applied to expand/collapse icon when editor is expanded
- `.codeEditor-collapsed--icon` - Applied to expand icon when editor is in normal mode
- `.codeEditor-border` - Applied to editor wrapper to show border in normal mode
- `.codeEditor-readonly` - Applied to editor wrapper when in read-only state

**CodeMirror Feature Classes:**

- `.CodeMirror-focused` - Applied when editor has keyboard focus
- `.CodeMirror-line` - Individual line containers within the editor
- `.CodeMirror-activeline` - Currently active/selected line highlighting
- `.CodeMirror-foldgutter` - Fold/unfold indicators for collapsible code blocks

**Theme Customization:**

**Color Theming:**
The component uses the theme.palette.ux color system for all color-related styling. Key color theme paths:

<div style={{ display: "flex", alignItems: "center", margin: "8px 0" }}>
	<div
		style={{
			width: "16px",
			height: "16px",
			backgroundColor: "#757575",
			border: "1px solid rgba(0,0,0,0.2)",
			borderRadius: "3px",
			marginRight: "8px"
		}}
	></div>
	<span>theme.palette.ux.secondary.wMain - Icon fill color for expand/collapse buttons</span>
</div>
<div style={{ display: "flex", alignItems: "center", margin: "8px 0" }}>
	<div
		style={{
			width: "16px",
			height: "16px",
			backgroundColor: "rgba(117, 117, 117, 0.4)",
			border: "1px solid rgba(0,0,0,0.2)",
			borderRadius: "3px",
			marginRight: "8px"
		}}
	></div>
	<span>theme.palette.ux.secondary.w8040 - Backdrop overlay color with 40% opacity</span>
</div>
<div style={{ display: "flex", alignItems: "center", margin: "8px 0" }}>
	<div
		style={{
			width: "16px",
			height: "16px",
			backgroundColor: "#FFFFFF",
			border: "1px solid rgba(0,0,0,0.2)",
			borderRadius: "3px",
			marginRight: "8px"
		}}
	></div>
	<span>theme.palette.background.w10 - Background color for expanded mode container</span>
</div>

To customize colors, override the palette.ux values in your theme configuration by extending the base theme and modifying the specific color group and variant you want to change.

**Non-Color Theming:**
Structural and layout customization through component overrides and mixins:

- theme.mixins.formComponent_CodeEditor.OuterWrapper - Outer container styling and expanded mode backdrop
- theme.mixins.formComponent_CodeEditor.InnerWrapper - Inner wrapper with expanded mode positioning and dimensions
- theme.mixins.formComponent_CodeEditor.EditorWrapper - Editor container styling with borders and readonly states
- theme.mixins.formComponent_CodeEditor.IconWrapper - Expand/collapse button positioning and styling

**Layout Specifications:**

- Expanded mode dimensions: `80%` width and height of viewport with centered positioning
- Expanded mode backdrop: `position: fixed` covering full viewport with `z-index: 1200`
- Expanded mode transform: `translate(-50%, -50%)` for perfect centering
- Icon positioning: `top: -12px, right: -12px` for expanded mode, `top: 16px, right: 24px` for collapsed mode
- Border radius: `4px` for expanded mode container styling
- Container padding: `4px` for expanded mode content spacing
- Icon z-index: `20` to ensure visibility above CodeMirror content (z-index: 9)
- Default CodeMirror height: `100%` when in expanded mode for full utilization
- Transition duration: `300ms` for smooth expand/collapse animations

<Subtitle>Stories</Subtitle>

<CustomStories />
